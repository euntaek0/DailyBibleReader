@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --font-sans: "Pretendard Variable", "Pretendard", "SF Pro Text", "Apple SD Gothic Neo", "Noto Sans KR";
    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

    /* Typography scale */
    --text-xs: 0.75rem;
    --text-sm: 0.875rem;
    --text-base: 1rem;
    --text-lg: 1.125rem;
    --text-xl: 1.25rem;
    --text-2xl: 1.5rem;
    --text-3xl: 1.875rem;
    --text-4xl: 2.25rem;

    --text-reader-min: 1.375rem;
    --text-reader-max: 1.875rem;

    --leading-tight: 1.15;
    --leading-snug: 1.3;
    --leading-normal: 1.5;
    --leading-relaxed: 1.75;

    --tracking-tight: -0.02em;
    --tracking-snug: -0.015em;
    --tracking-normal: -0.01em;
    --tracking-wide: 0.1em;

    --weight-regular: 400;
    --weight-medium: 500;
    --weight-semibold: 600;
    --weight-bold: 700;

    /* Spacing scale (4px base) */
    --space-0: 0rem;
    --space-1: 0.25rem;
    --space-2: 0.5rem;
    --space-3: 0.75rem;
    --space-4: 1rem;
    --space-5: 1.25rem;
    --space-6: 1.5rem;
    --space-8: 2rem;
    --space-10: 2.5rem;
    --space-12: 3rem;
    --space-16: 4rem;

    /* Stroke / line widths */
    --line-0: 0px;
    --line-1: 1px;
    --line-2: 2px;
    --line-4: 4px;

    /* Palette: Neutral (slate) */
    --neutral-50: 210 40% 98%;
    --neutral-100: 210 40% 96.1%;
    --neutral-200: 214.3 31.8% 91.4%;
    --neutral-300: 212.7 26.8% 83.9%;
    --neutral-400: 215 20.2% 65.1%;
    --neutral-500: 215.4 16.3% 46.9%;
    --neutral-600: 215.3 19.3% 34.5%;
    --neutral-700: 215.3 25% 26.7%;
    --neutral-800: 217.2 32.6% 17.5%;
    --neutral-900: 222.2 47.4% 11.2%;
    --neutral-950: 228.6 84% 4.9%;

    /* Palette: Primary (blue) */
    --primary-50: 213.8 100% 96.9%;
    --primary-100: 214.3 94.6% 92.7%;
    --primary-200: 213.3 96.9% 87.3%;
    --primary-300: 211.7 96.4% 78.4%;
    --primary-400: 213.1 93.9% 67.8%;
    --primary-500: 217.2 91.2% 59.8%;
    --primary-600: 221.2 83.2% 53.3%;
    --primary-700: 224.3 76.3% 48%;
    --primary-800: 225.9 70.7% 40.2%;
    --primary-900: 224.4 64.3% 32.9%;
    --primary-950: 226.2 57% 21%;

    /* Palette: Secondary (teal) */
    --secondary-50: 166.2 76.5% 96.7%;
    --secondary-100: 167.2 85.5% 89.2%;
    --secondary-200: 168.4 83.8% 78.2%;
    --secondary-300: 170.6 76.9% 64.3%;
    --secondary-400: 172.5 66% 50.4%;
    --secondary-500: 173.4 80.4% 40%;
    --secondary-600: 174.7 83.9% 31.6%;
    --secondary-700: 175.3 77.4% 26.1%;
    --secondary-800: 176.1 69.4% 21.8%;
    --secondary-900: 175.9 60.8% 19%;
    --secondary-950: 178.6 84.3% 10%;

    /* Palette: Red */
    --red-50: 0 85.7% 97.3%;
    --red-100: 0 93.3% 94.1%;
    --red-200: 0 96.3% 89.4%;
    --red-300: 0 93.5% 81.8%;
    --red-400: 0 90.6% 70.8%;
    --red-500: 0 84.2% 60.2%;
    --red-600: 0 72.2% 50.6%;
    --red-700: 0 73.7% 41.8%;
    --red-800: 0 70% 35.3%;
    --red-900: 0 62.8% 30.6%;
    --red-950: 0 74.7% 15.5%;

    /* Palette: Yellow (amber) */
    --yellow-50: 48 100% 96.1%;
    --yellow-100: 48 96.5% 88.8%;
    --yellow-200: 48 96.6% 76.7%;
    --yellow-300: 45.9 96.7% 64.5%;
    --yellow-400: 43.3 96.4% 56.3%;
    --yellow-500: 37.7 92.1% 50.2%;
    --yellow-600: 32.1 94.6% 43.7%;
    --yellow-700: 26 90.5% 37.1%;
    --yellow-800: 22.7 82.5% 31.4%;
    --yellow-900: 21.7 77.8% 26.5%;
    --yellow-950: 20.9 91.7% 14.1%;

    /* Palette: Green (emerald) */
    --green-50: 151.8 81% 95.9%;
    --green-100: 149.3 80.4% 90%;
    --green-200: 152.4 76% 80.4%;
    --green-300: 156.2 71.6% 66.9%;
    --green-400: 158.1 64.4% 51.6%;
    --green-500: 160.1 84.1% 39.4%;
    --green-600: 161.4 93.5% 30.4%;
    --green-700: 162.9 93.5% 24.3%;
    --green-800: 163.1 88.1% 19.8%;
    --green-900: 164.2 85.7% 16.5%;
    --green-950: 165.7 91.3% 9%;

    /* Toss-like neutral base + blue accent */
    --background: 210 20% 96%;
    --foreground: 222 47% 11%;
    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;
    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;
    --primary: 217 91% 60%;
    --primary-foreground: 0 0% 100%;
    --secondary: 220 18% 94%;
    --secondary-foreground: 222 25% 20%;
    --muted: 220 20% 95%;
    --muted-foreground: 220 9% 46%;
    --accent: 217 91% 60%;
    --accent-foreground: 0 0% 100%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    --border: 220 14% 88%;
    --input: 220 14% 88%;
    --ring: 217 91% 60%;

    --reader-bg: 0 0% 100%;
    --highlight-read: 148 35% 88%;
    --highlight-focus: 217 100% 92%;
    --highlight-miss: 35 92% 90%;

    --status-read: 160 47% 35%;
    --status-partial: 33 57% 41%;
    --status-not-read: 220 13% 45%;

    --radius-sm: 0.5rem;
    --radius-md: 0.75rem;
    --radius-lg: 1rem;
    --radius-xl: 1.25rem;
    --radius-pill: 9999px;

    --radius-control: var(--radius-md);
    --radius-surface: var(--radius-xl);

    --shadow-1: 0 1px 2px rgb(15 23 42 / 0.06);
    --shadow-2: 0 10px 24px rgb(15 23 42 / 0.10);
    --shadow-3: 0 24px 48px rgb(15 23 42 / 0.16);
    --shadow-e0: none;
    --shadow-e1: var(--shadow-1);
    --shadow-e2: var(--shadow-2);
    --shadow-e3: var(--shadow-3);

    /* Effects */
    --shadow-soft-diffusion: 0 18px 60px rgb(15 23 42 / 0.10), 0 2px 6px rgb(15 23 42 / 0.06);
    --shadow-strong-diffusion: 0 14px 40px rgb(15 23 42 / 0.14), 0 1px 2px rgb(15 23 42 / 0.08);
    --shadow-sunken: inset 0 1px 2px rgb(15 23 42 / 0.14), inset 0 0 0 1px hsl(var(--border) / 0.8);
    --shadow-glow-primary: 0 0 0 1px hsl(var(--primary) / 0.35), 0 10px 30px hsl(var(--primary) / 0.25);
    --shadow-glow-secondary: 0 0 0 1px hsl(var(--secondary) / 0.25), 0 10px 28px hsl(var(--secondary) / 0.18);
    --shadow-neobrutal: 6px 6px 0 0 hsl(var(--neutral-900) / 1);

    --duration-fast: 120ms;
    --duration-base: 180ms;
    --duration-slow: 260ms;
    --duration-pulse: 2400ms;
    --easing-standard: cubic-bezier(0.2, 0, 0, 1);
    --easing-emphasis: cubic-bezier(0.2, 0.8, 0.2, 1);
    --easing-exit: cubic-bezier(0.4, 0, 1, 1);

    --line-height-reader: 1.86;
    --line-height-ui: 1.5;

    --topbar-height: 4rem;
    --bottom-nav-height: 5rem;
    --content-gutter: clamp(1rem, 4vw, 1.5rem);
  }

  .dark {
    --background: 222 25% 11%;
    --foreground: 214 30% 92%;
    --card: 223 20% 15%;
    --card-foreground: 214 30% 92%;
    --popover: 223 20% 15%;
    --popover-foreground: 214 30% 92%;
    --primary: 217 91% 65%;
    --primary-foreground: 223 28% 11%;
    --secondary: 222 14% 25%;
    --secondary-foreground: 214 18% 86%;
    --muted: 222 14% 22%;
    --muted-foreground: 215 12% 70%;
    --accent: 217 91% 65%;
    --accent-foreground: 223 28% 11%;
    --destructive: 9 74% 69%;
    --destructive-foreground: 223 28% 11%;
    --border: 221 14% 31%;
    --input: 221 14% 31%;
    --ring: 217 91% 65%;

    --reader-bg: 221 17% 20%;
    --highlight-read: 147 27% 33%;
    --highlight-focus: 217 45% 38%;
    --highlight-miss: 36 35% 36%;

    --status-read: 151 44% 69%;
    --status-partial: 36 76% 72%;
    --status-not-read: 215 18% 78%;
  }

  [data-contrast="high"] {
    --background: 0 0% 100%;
    --foreground: 0 0% 0%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 0%;
    --primary: 175 100% 28%;
    --primary-foreground: 0 0% 100%;
    --muted: 0 0% 90%;
    --muted-foreground: 0 0% 8%;
    --border: 0 0% 20%;
    --reader-bg: 0 0% 100%;
    --highlight-focus: 50 100% 70%;
    --highlight-read: 120 60% 85%;
  }

  html[data-font-scale="small"] {
    font-size: 15px;
  }

  html[data-font-scale="normal"] {
    font-size: 16px;
  }

  html[data-font-scale="large"] {
    font-size: 17px;
  }

  * {
    @apply border-border;
  }

  html,
  body,
  #root {
    height: 100%;
    width: 100%;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: var(--font-sans), -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", "Noto Sans KR", "Segoe UI", sans-serif;
    line-height: var(--line-height-ui);
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
    overflow: hidden;
  }

  button,
  input,
  select,
  textarea {
    font: inherit;
  }
}

@layer utilities {
  .reader-surface {
    @apply rounded-xl border border-border/70 bg-reader-bg;
  }

  .reader-column {
    @apply mx-auto w-full max-w-reader;
  }

  .reader-word {
    @apply rounded-md px-1 py-0.5 transition-colors duration-base ease-standard;
  }

  .reader-word-read {
    @apply bg-reader-read text-status-read;
  }

  .reader-word-focus {
    @apply bg-reader-focus text-foreground ring-1 ring-primary/45;
  }

  .reader-word-miss {
    @apply bg-reader-miss;
  }

  .app-bottom-nav {
    transition: transform var(--duration-slow) var(--easing-standard), opacity var(--duration-base) var(--easing-standard);
  }

  .topbar-shadow {
    box-shadow: 0 1px 0 hsl(var(--border) / 0.65);
  }

  .tap-target {
    min-height: 44px;
    min-width: 44px;
  }

  .page-gutter {
    padding-left: var(--content-gutter);
    padding-right: var(--content-gutter);
  }

  html[data-listening="true"] .app-bottom-nav {
    transform: translateY(100%);
    opacity: 0;
    pointer-events: none;
  }
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 1ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 1ms !important;
    scroll-behavior: auto !important;
  }
}
